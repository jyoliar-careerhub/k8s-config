apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-includes-bootstrap
  namespace: nginx-gateway
data:
  main.conf: |
    log_format json_format escape=json  '{"proxy_add_x_forwarded_for":"$proxy_add_x_forwarded_for",'
                                      '"remote_user_ip":"$remote_user",'
                                      '"time_local":"$time_local",'
                                      '"request":"$request",'
                                      '"status":"$status",'
                                      '"body_bytes_sent":"$body_bytes_sent",'
                                      '"http_referrer":"$http_referer",'
                                      '"http_user_agent":"$http_user_agent",'
                                      '"request_time":"$request_time",'
                                      '"upstream_response_time":"$upstream_response_time",'
                                      '"userid":"$cookie__userId"}';
    access_log stdout json_format;
    error_log stderr info;
